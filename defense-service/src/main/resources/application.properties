spring.application.name=defense-service
server.port=8083

# Database Configuration
spring.datasource.url=jdbc:mariadb://localhost:3306/defensedb
spring.datasource.username=root
spring.datasource.password=amthroot
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect
spring.jpa.properties.hibernate.format_sql=true

# Eureka Client Configuration
eureka.client.service-url.defaultZone=http://eureka:eureka123@localhost:8761/eureka/,http://eureka:eureka123@localhost:8762/eureka/
eureka.instance.prefer-ip-address=true

# Feign Client Configuration
feign.client.config.default.connectTimeout=5000
feign.client.config.default.readTimeout=5000
feign.client.config.default.loggerLevel=full

# Logging Configuration
logging.level.ma.emsi.defenseservice=DEBUG
logging.level.ma.emsi.defenseservice.client=DEBUG
logging.level.feign=DEBUG

# Resilience4j Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.userService.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.userService.slidingWindowSize=10
resilience4j.circuitbreaker.instances.userService.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.userService.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.userService.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.userService.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.userService.failureRateThreshold=50
resilience4j.circuitbreaker.instances.userService.slowCallRateThreshold=100
resilience4j.circuitbreaker.instances.userService.slowCallDurationThreshold=2s
resilience4j.circuitbreaker.instances.userService.eventConsumerBufferSize=10
resilience4j.circuitbreaker.instances.userService.recordExceptions[0]=org.springframework.web.client.HttpServerErrorException
resilience4j.circuitbreaker.instances.userService.recordExceptions[1]=java.io.IOException
resilience4j.circuitbreaker.instances.userService.recordExceptions[2]=feign.FeignException

# Resilience4j Retry Configuration
resilience4j.retry.instances.userService.maxAttempts=3
resilience4j.retry.instances.userService.waitDuration=500ms
resilience4j.retry.instances.userService.enableExponentialBackoff=true
resilience4j.retry.instances.userService.exponentialBackoffMultiplier=2
resilience4j.retry.instances.userService.retryExceptions[0]=org.springframework.web.client.HttpServerErrorException
resilience4j.retry.instances.userService.retryExceptions[1]=java.io.IOException
resilience4j.retry.instances.userService.retryExceptions[2]=feign.FeignException

# Resilience4j Time Limiter Configuration
resilience4j.timelimiter.instances.userService.timeoutDuration=3s

# Actuator Configuration for Resilience4j Monitoring
management.endpoints.web.exposure.include=health,info,metrics,circuitbreakers,circuitbreakerevents
management.endpoint.health.show-details=always
management.health.circuitbreakers.enabled=true

# Defense Prerequisites Configuration
defense.prerequis.min-publications-q1q2=2
defense.prerequis.min-conferences=2
defense.prerequis.min-heures-formation=200

# Jury Composition Configuration
defense.jury.min-membres=4
defense.jury.min-rapporteurs=2

# Proc√®s-Verbal Storage Configuration
defense.pv.storage.path=./storage/proces-verbaux
defense.pv.base-url=http://localhost:8083/api/defense-service/defenses

# Kafka Configuration
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
defense.kafka.topic=defense-events
